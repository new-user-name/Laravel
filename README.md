## Общая идея отрисовки

Своих сотрудников оунер админ видит в кабинете как экземпляры класса Owner, а своё юрлицо -- как экземпляр класса Jurik.

## Меню слева

Меню можно сделать двумя способами -- подбирая видимость "моделей" через политики или выстраивая через NovaServiceProvider. Если "Мой аккаунт" слева должен вести на какой-то конкретный инстанс модели, то скорее всего его надо задавать через NovaSeviceProvider.

Делать ли линк вида
https://localhost/acc/resources/users/6494
или
https://localhost/acc/resources/owners/6494
сразу не ясно. Сейчас стоит второй вариант.

Порядок следования слева можно регулировать вдобавок в 
D:\php\cargo2\app\Nova\Models\User.php через

```public static $priority = 4;```

и так для каждой модели.
Там можно установить фильтр, пропускающий не всё, фильтр сидит в ```D:\php\cargo2\app\Nova\Filters\User.php```.

То есть показывамое в таблице справа можно определить либо через scope в модели Лары, либо через фильтр в модели Новы. Сейчас делается через scopes.
Сейчас пункт "Пользователи" рисует модель Новы, пункт "Моё юрлицо" задаётся в NovaServiceProvider, там же рисуется на него прямой линк.

## Иерархия моделей

Есть таблица users для пользователей и таблица juriks для юрлиц. Юрлицо не может быть залогиненным. На модели User растут модели owner, carrier и broker, каждая из которых населена (примерно тремя) юзерами, являющимися сотрудниками одного юрлица. Юзеры связаны с юриками через parent_id.

## Как рисуется оунер не юрик из кабинета оунера не юрика

1. Оунер наследует User.
2. Для текущего залогиненного оунер админа все члены текущей модели "оунер" имеют его же parent_id, т.е. показываем только работников одного юрлица.
3. В политиках Новы разрешаем просмотр для ["owner admin", 'FTL'].
4. Получаем слева пункт меню "пользователи", его рисует D:\php\cargo2\app\Nova\Models\Owner.php
5. Справа получаем таблицу, можно заходить в строки таблицы, отображение задаётся моделью Новы.

## Как рисуется юрик из кабинета юзера

1. Для залогиненного оунер админа соответствующий член модели Jurik имеет id такой же, какой parent_id у этого оунер админа.
2. В политиках Новы разрешаем просмотр для ["owner admin", 'FTL'].
3. Получаем слева пункт меню "Моё юрлицо", его рисует NovaServiceProvider.
4. По клику на меню получаем справа картинку, которая задаётся в модели Новы Jurik.
